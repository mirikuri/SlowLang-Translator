<!DOCTYPE html>
<html>
<head>
    <title>SlowLang‚Ñ¢ Translator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .subtitle {
            text-align: center;
            font-style: italic;
            color: #666;
        }
        textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            min-height: 100px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #45a049;
        }
        .speed-up {
            background: #f44336;
            float: right;
        }
        .speed-up:hover {
            background: #d32f2f;
        }
        .status {
            margin: 20px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 5px;
            min-height: 50px;
        }
        .translation {
            font-size: 24px;
            margin: 20px 0;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 5px;
        }
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
        }
        .progress-bar {
            height: 20px;
            background-color: #4CAF50;
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s;
        }
        .powered-by {
            text-align: right;
            font-size: 12px;
            color: #999;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üï∏Ô∏è SlowLang‚Ñ¢ Translator</h1>
        <p class="subtitle">"–ú—ã –ø–µ—Ä–µ–≤–µ–¥—ë–º. –ö–æ–≥–¥–∞-–Ω–∏–±—É–¥—å."</p>
        
        <textarea id="inputText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞..."></textarea>
        
        <div>
            <button id="translateBtn">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
            <button id="speedUpBtn" class="speed-up">–£—Å–∫–æ—Ä–∏—Ç—å (999‚Ç∏)</button>
        </div>
        
        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        
        <div id="status" class="status">
            –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏".
        </div>
        
        <div id="translation" class="translation"></div>
        
        <div class="powered-by">Powered by –°–≤–µ—Ä—Ö–ú–µ–¥–ª–µ–Ω–Ω—ã–π GPT</div>
    </div>

    <script>
        const translateBtn = document.getElementById('translateBtn');
        const speedUpBtn = document.getElementById('speedUpBtn');
        const inputText = document.getElementById('inputText');
        const statusDiv = document.getElementById('status');
        const translationDiv = document.getElementById('translation');
        const progressBar = document.getElementById('progressBar');
        let progressInterval;
        
        translateBtn.addEventListener('click', async () => {
    const text = inputText.value.trim();
    if (!text) return;

    // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
    translationDiv.textContent = '';
    statusDiv.innerHTML = 'üîÑ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–µ—Ä–µ–≤–æ–¥—É...';
    progressBar.style.width = '0%';
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    if (eventSource) eventSource.close();
    if (progressInterval) clearInterval(progressInterval);
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
    animateProgressBar();
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ EventSource —Å GET-–∑–∞–ø—Ä–æ—Å–æ–º
    eventSource = new EventSource(`/translate?text=${encodeURIComponent(text)}`);
    
    eventSource.onmessage = (event) => {
        const data = event.data;
        
        if (data.startsWith('TRANSLATION:')) {
            translationDiv.textContent = data.split(':')[1].trim();
        } 
        else if (data.startsWith('DONE:')) {
            statusDiv.innerHTML = data.split(':')[1].trim();
            finishTranslation();
        }
        else {
            statusDiv.innerHTML = data;
        }
    };
    
    eventSource.onerror = () => {
        if (!eventSource || eventSource.readyState === EventSource.CLOSED) return;
        statusDiv.innerHTML = '‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è';
        finishTranslation();
    };
});

function finishTranslation() {
    if (progressInterval) {
        clearInterval(progressInterval);
        progressBar.style.width = '100%';
    }
    if (eventSource) {
        eventSource.close();
        eventSource = null;
    }
}
        
        speedUpBtn.addEventListener('click', () => {
            alert('–ò–∑–≤–∏–Ω–∏—Ç–µ, —Ñ—É–Ω–∫—Ü–∏—è "–£—Å–∫–æ—Ä–∏—Ç—å" –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...');
        });
        
        function animateProgressBar() {
            let progress = 0;
            let direction = 1;
            progressInterval = setInterval(() => {
                progress += direction * Math.random() * 10;
                
                if (progress >= 100) {
                    progress = 100;
                    direction = -1;
                } else if (progress <= 0) {
                    progress = 0;
                    direction = 1;
                }
                
                progressBar.style.width = `${progress}%`;
            }, 300);
        }
    </script>
</body>
</html>